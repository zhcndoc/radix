---
metaTitle: 对话框
metaDescription: 叠加在主窗口或另一个对话框窗口上的窗口，使下面的内容变得无效。
name: dialog
aria: https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal
---

# 对话框

<Description>
	叠加在主窗口或另一个对话框窗口上的窗口，
	使下面的内容变得无效。
</Description>

<HeroContainer>
	<DialogDemo />
</HeroContainer>

<HeroCodeBlock folder="Dialog" />

<Highlights
	features={[
		"支持模态和非模态模式。",
		"焦点会自动被限制在模态内部。",
		"可以是受控或非受控。",
		<span>
			通过 <Code>Title</Code> 和{" "}
			<Code>Description</Code> 组件管理屏幕阅读器的公告。
		</span>,
		"Esc 键会自动关闭组件。",
	]}
/>

## 安装

从命令行安装组件。

```bash
npm install @radix-ui/react-dialog
```

## 结构

导入所有部件并将它们组合在一起。

```jsx
import { Dialog } from "radix-ui";

export default () => (
	<Dialog.Root>
		<Dialog.Trigger />
		<Dialog.Portal>
			<Dialog.Overlay />
			<Dialog.Content>
				<Dialog.Title />
				<Dialog.Description />
				<Dialog.Close />
			</Dialog.Content>
		</Dialog.Portal>
	</Dialog.Root>
);
```

## API 参考

### 根部件

包含对话框的所有部分。

<PropsTable
	data={[
		{
			name: "defaultOpen",
			type: "boolean",
			description: (
				<span>
					对话框在最初渲染时的打开状态。当您不需要控制其打开状态时使用。
				</span>
			),
		},
		{
			name: "open",
			type: "boolean",
			description: (
				<span>
					对话框的受控打开状态。必须与 <Code>onOpenChange</Code> 一起使用。
				</span>
			),
		},
		{
			name: "onOpenChange",
			type: "(open: boolean) => void",
			typeSimple: "function",
			description: (
				<span>
					当对话框的打开状态改变时调用的事件处理器。
				</span>
			),
		},
		{
			name: "modal",
			required: false,
			type: "boolean",
			default: "true",
			description: (
				<span>
					对话框的模态性。当设置为 <Code>true</Code> 时，与外部元素的交互将被禁用，屏幕阅读器只能看到对话框内容。
				</span>
			),
		},
	]}
/>

### 触发器

打开对话框的按钮。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
	]}
/>

<DataAttributesTable
	data={[
		{
			attribute: "[data-state]",
			values: ["open", "closed"],
		},
	]}
/>

### 门户

使用时，将您的叠加和内容部分传送到 `body` 中。

<PropsTable
	data={[
		{
			name: "forceMount",
			type: "boolean",
			description: (
				<span>
					当需要更多控制时，用于强制挂载。控制与 React 动画库的动画时特别有用。如果在此部分使用，将被继承到 <Code>Dialog.Overlay</Code> 和{" "}
					<Code>Dialog.Content</Code>。
				</span>
			),
		},
		{
			name: "container",
			type: "HTMLElement",
			default: "document.body",
			description: "指定一个容器元素以传送内容。",
		},
	]}
/>

### 覆盖层

当对话框打开时，覆盖视图的无效部分的层。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
		{
			name: "forceMount",
			type: "boolean",
			description: (
				<span>
					当需要更多控制时，用于强制挂载。控制与 React 动画库的动画时特别有用。它从{" "}
					<Code>Dialog.Portal</Code> 继承。
				</span>
			),
		},
	]}
/>

<DataAttributesTable
	data={[
		{
			attribute: "[data-state]",
			values: ["open", "closed"],
		},
	]}
/>

### 内容

包含在打开对话框中渲染的内容。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
		{
			name: "forceMount",
			type: "boolean",
			description: (
				<span>
					当需要更多控制时，用于强制挂载。控制与 React 动画库的动画时特别有用。它从{" "}
					<Code>Dialog.Portal</Code> 继承。
				</span>
			),
		},
		{
			name: "onOpenAutoFocus",
			type: "(event: Event) => void",
			typeSimple: "function",
			description: (
				<span>
					当焦点在打开后移动到组件时调用的事件处理器。可以通过调用{" "}
					<Code>event.preventDefault</Code> 来阻止它。
				</span>
			),
		},
		{
			name: "onCloseAutoFocus",
			type: "(event: Event) => void",
			typeSimple: "function",
			description: (
				<span>
					当焦点在关闭后移动到触发器时调用的事件处理器。可以通过调用 <Code>event.preventDefault</Code> 来阻止它。
				</span>
			),
		},
		{
			name: "onEscapeKeyDown",
			type: "(event: KeyboardEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当按下 escape 键时调用的事件处理器。可以通过调用 <Code>event.preventDefault</Code> 来阻止它。
				</span>
			),
		},
		{
			name: "onPointerDownOutside",
			type: "(event: PointerDownOutsideEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当指针事件发生在组件的边界外部时调用的事件处理器。可以通过调用{" "}
					<Code>event.preventDefault</Code> 来阻止它。
				</span>
			),
		},
		{
			name: "onInteractOutside",
			type: "(event: React.FocusEvent | MouseEvent | TouchEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当交互（指针或焦点事件）发生在组件的边界外部时调用的事件处理器。可以通过调用 <Code>event.preventDefault</Code> 来阻止它。
				</span>
			),
		},
	]}
/>

<DataAttributesTable
	data={[
		{
			attribute: "[data-state]",
			values: ["open", "closed"],
		},
	]}
/>

### 关闭

关闭对话框的按钮。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
	]}
/>

### 标题

一个可访问的标题，在打开对话框时被宣布。

如果您想隐藏标题，请将其包装在我们的 [视觉隐藏](../utilities/visually-hidden) 工具中，例如 `<VisuallyHidden asChild>`。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
	]}
/>

### 描述

一个可选的可访问描述，在打开对话框时被宣布。

如果您想隐藏描述，请将其包装在我们的 [视觉隐藏](../utilities/visually-hidden) 工具中，例如 `<VisuallyHidden asChild>`。如果您完全想要移除描述，请删除此部分并将 `aria-describedby={undefined}` 传递给 `Dialog.Content`。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					更改为子元素传递的默认渲染元素，合并它们的属性和行为。
					<br />
					<br />
					阅读我们的 <a href="../guides/composition">组合</a> 指南以了解更多细节。
				</>
			),
		},
	]}
/>

## 示例

### 在异步表单提交后关闭

使用受控属性在异步操作完成后以编程方式关闭 Dialog。

```jsx line=4,7,10,15,17
import * as React from "react";
import { Dialog } from "radix-ui";

const wait = () => new Promise((resolve) => setTimeout(resolve, 1000));

export default () => {
	const [open, setOpen] = React.useState(false);

	return (
		<Dialog.Root __open__={open} __onOpenChange__={setOpen}>
			<Dialog.Trigger>打开</Dialog.Trigger>
			<Dialog.Portal>
				<Dialog.Overlay />
				<Dialog.Content>
					<form
						onSubmit={(event) => {
							wait().then(() => setOpen(false));
							event.preventDefault();
						}}
					>
						{/** 一些输入 */}
						<button type="submit">提交</button>
					</form>
				</Dialog.Content>
			</Dialog.Portal>
		</Dialog.Root>
	);
};
```

### 可滚动的覆盖层

将内容移动到覆盖层内以渲染一个具有溢出的对话框。

```jsx
// index.jsx
import { Dialog } from "radix-ui";
import "./styles.css";

export default () => {
	return (
		<Dialog.Root>
			<Dialog.Trigger />
			<Dialog.Portal>
				<Dialog.Overlay className="DialogOverlay">
					<Dialog.Content className="DialogContent">...</Dialog.Content>
				</Dialog.Overlay>
			</Dialog.Portal>
		</Dialog.Root>
	);
};
```

```css
/* styles.css */
.DialogOverlay {
	background: rgba(0 0 0 / 0.5);
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: grid;
	place-items: center;
	overflow-y: auto;
}

.DialogContent {
	min-width: 300px;
	background: white;
	padding: 30px;
	border-radius: 4px;
}
```

### 自定义门户容器

自定义您的对话框传送到的元素。

```jsx line=5,10,16
import * as React from "react";
import { Dialog } from "radix-ui";

export default () => {
	const [container, setContainer] = React.useState(null);
	return (
		<div>
			<Dialog.Root>
				<Dialog.Trigger />
				<Dialog.Portal __container__={container}>
					<Dialog.Overlay />
					<Dialog.Content>...</Dialog.Content>
				</Dialog.Portal>
			</Dialog.Root>

			<div ref={__setContainer__} />
		</div>
	);
};
```

## 可访问性

遵循 [对话框 WAI-ARIA 设计模式](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal)。

### 键盘交互

<KeyboardTable
	data={[
		{
			keys: ["Space"],
			description: "打开/关闭对话框。",
		},
		{
			keys: ["Enter"],
			description: "打开/关闭对话框。",
		},
		{
			keys: ["Tab"],
			description: "将焦点移动到下一个可聚焦元素。",
		},
		{
			keys: ["Shift + Tab"],
			description: "将焦点移动到上一个可聚焦元素。",
		},
		{
			keys: ["Esc"],
			description: (
				<span>
					关闭对话框并将焦点移动到 <Code>Dialog.Trigger</Code>。
				</span>
			),
		},
	]}
/>

## 自定义 API

通过将基本部件抽象为您自己的组件来创建您自己的 API。

### 抽象覆盖层和关闭按钮

此示例抽象了 `Dialog.Overlay` 和 `Dialog.Close` 部分。

#### 用法

```jsx
import { Dialog, DialogTrigger, DialogContent } from "./your-dialog";

export default () => (
	<Dialog>
		<DialogTrigger>对话框触发器</DialogTrigger>
		<DialogContent>对话框内容</DialogContent>
	</Dialog>
);
```

#### 实现

```jsx
// your-dialog.jsx
import * as React from "react";
import { Dialog as DialogPrimitive } from "radix-ui";
import { Cross1Icon } from "@radix-ui/react-icons";

export const DialogContent = React.forwardRef(
	({ children, ...props }, forwardedRef) => (
		<DialogPrimitive.Portal>
			<DialogPrimitive.Overlay />
			<DialogPrimitive.Content {...props} ref={forwardedRef}>
				{children}
				<DialogPrimitive.Close aria-label="关闭">
					<Cross1Icon />
				</DialogPrimitive.Close>
			</DialogPrimitive.Content>
		</DialogPrimitive.Portal>
	),
);

export const Dialog = DialogPrimitive.Root;
export const DialogTrigger = DialogPrimitive.Trigger;
```