---
metaTitle: 弹出框
metaDescription: 通过按钮触发，在一个门户中显示丰富的内容。
name: 弹出框
aria: https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal
---

# 弹出框

<Description>
	在一个门户中通过按钮触发显示丰富的内容。
</Description>

<HeroContainer>
	<PopoverDemo />
</HeroContainer>

<HeroCodeBlock folder="Popover" />

<Highlights
	features={[
		"可以是可控或不可控的。",
		"自定义侧边、对齐、偏移、碰撞处理。",
		"可选择性地渲染指向箭头。",
		"完全管理和自定义焦点。",
		"支持模态和非模态模式。",
		"自定义处理关闭和层叠行为。",
	]}
/>

## 安装

通过命令行安装组件。

```bash
npm install @radix-ui/react-popover
```

## 结构

导入所有部分并组合在一起。

```jsx
import { Popover } from "radix-ui";

export default () => (
	<Popover.Root>
		<Popover.Trigger />
		<Popover.Anchor />
		<Popover.Portal>
			<Popover.Content>
				<Popover.Close />
				<Popover.Arrow />
			</Popover.Content>
		</Popover.Portal>
	</Popover.Root>
);
```

## API 参考

### 根

包含弹出框的所有部分。

<PropsTable
	data={[
		{
			name: "defaultOpen",
			type: "boolean",
			description: (
				<span>
					弹出框初次渲染时的打开状态。当你不需要控制其打开状态时使用。
				</span>
			),
		},
		{
			name: "open",
			type: "boolean",
			description: (
				<span>
					弹出框的可控打开状态。必须与 <Code>onOpenChange</Code> 一起使用。
				</span>
			),
		},
		{
			name: "onOpenChange",
			type: "(open: boolean) => void",
			typeSimple: "function",
			description: (
				<span>
					当弹出框的打开状态发生变化时调用的事件处理程序。
				</span>
			),
		},
		{
			name: "modal",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<span>
					弹出框的模态性。当设置为 <Code>true</Code> 时，外部元素的交互将被禁用，屏幕阅读器仅能看到弹出框内容。
				</span>
			),
		},
	]}
/>

### 触发器

切换弹出框的按钮。默认情况下，`Popover.Content` 将相对于触发器定位。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					将默认渲染的元素更改为作为子元素传递的元素，合并它们的属性和行为。
					<br />
					<br />
					查阅我们的 <a href="../guides/composition">组合</a> 指南以获取更多细节。
				</>
			),
		},
	]}
/>

<DataAttributesTable
	data={[
		{
			attribute: "[data-state]",
			values: ["open", "closed"],
		},
	]}
/>

### 锚

可选元素，用于将`Popover.Content` 定位。如果未使用此部分，内容将相对于 <Code>Popover.Trigger</Code> 定位。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					将默认渲染的元素更改为作为子元素传递的元素，合并它们的属性和行为。
					<br />
					<br />
					查阅我们的 <a href="../guides/composition">组合</a> 指南以获取更多细节。
				</>
			),
		},
	]}
/>

### 门户

使用时，将内容部分门户到 `body`。

<PropsTable
	data={[
		{
			name: "forceMount",
			type: "boolean",
			description: (
				<span>
					在需要更多控制时强制挂载。对于使用 React 动画库控制动画非常有用。如果在此部分中使用，它将被 <Code>Popover.Content</Code> 继承。
				</span>
			),
		},
		{
			name: "container",
			type: "HTMLElement",
			default: "document.body",
			description: "指定一个容器元素以门户内容。",
		},
	]}
/>

### 内容

在弹出框打开时弹出的组件。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					将默认渲染的元素更改为作为子元素传递的元素，合并它们的属性和行为。
					<br />
					<br />
					查阅我们的 <a href="../guides/composition">组合</a> 指南以获取更多细节。
				</>
			),
		},
		{
			name: "onOpenAutoFocus",
			type: "(event: Event) => void",
			typeSimple: "function",
			description: (
				<span>
					当焦点在打开后移入组件时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "onCloseAutoFocus",
			type: "(event: Event) => void",
			typeSimple: "function",
			description: (
				<span>
					当焦点在关闭后移至触发器时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "onEscapeKeyDown",
			type: "(event: KeyboardEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当按下逃逸键时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "onPointerDownOutside",
			type: "(event: PointerDownOutsideEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当指针事件发生在组件外部时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "onFocusOutside",
			type: "(event: FocusOutsideEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当焦点从组件边界外移时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "onInteractOutside",
			type: "(event: PointerDownOutsideEvent | FocusOutsideEvent) => void",
			typeSimple: "function",
			description: (
				<span>
					当在组件的边界外发生交互（指针或焦点事件）时调用的事件处理程序。可以通过调用 <Code>event.preventDefault</Code> 进行阻止。
				</span>
			),
		},
		{
			name: "forceMount",
			type: "boolean",
			description: (
				<span>
					在需要更多控制时强制挂载。对于使用 React 动画库控制动画非常有用。它继承自 <Code>Popover.Portal</Code>。
				</span>
			),
		},
		{
			name: "side",
			type: '"top" | "right" | "bottom" | "left"',
			typeSimple: "enum",
			default: '"bottom"',
			description: (
				<span>
					打开时希望渲染的锚的首选侧面。在发生碰撞并且启用了 <Code>avoidCollisions</Code> 时将反转。
				</span>
			),
		},
		{
			name: "sideOffset",
			type: "number",
			default: "0",
			description: <span>与锚的距离（以像素为单位）。</span>,
		},
		{
			name: "align",
			type: '"start" | "center" | "end"',
			typeSimple: "enum",
			default: '"center"',
			description: (
				<span>
					与锚的首选对齐方式。当发生碰撞时可能会发生变化。
				</span>
			),
		},
		{
			name: "alignOffset",
			type: "number",
			default: "0",
			description: (
				<span>
					从 <Code>"start"</Code> 或 <Code>"end"</Code> 对齐选项的偏移量（以像素为单位）。
				</span>
			),
		},
		{
			name: "avoidCollisions",
			type: "boolean",
			default: "true",
			description: (
				<span>
					当 <Code>true</Code> 时，覆盖 <Code>side</Code> 和 <Code>align</Code> 偏好以防止与边界边缘发生碰撞。
				</span>
			),
		},
		{
			name: "collisionBoundary",
			type: "Element | null | Array<Element | null>",
			typeSimple: "Boundary",
			default: "[]",
			description: (
				<span>
					用于作为碰撞边界的元素。默认情况下这是视口，但您可以提供额外的元素以包含在此检查中。
				</span>
			),
		},
		{
			name: "collisionPadding",
			type: "number | Partial<Record<Side, number>>",
			typeSimple: "number | Padding",
			default: "0",
			description: (
				<span>
					边界边缘到发生碰撞检测的距离（以像素为单位）。接受一个数字（所有边相同），或一个部分填充对象，例如：{" "}
					<Code>{`{ top: 20, left: 20 }`}</Code>。
				</span>
			),
		},
		{
			name: "arrowPadding",
			type: "number",
			default: "0",
			description: (
				<span>
					箭头与内容边缘之间的填充。如果您的内容具有 <Code>border-radius</Code>，这将防止其溢出角落。
				</span>
			),
		},
		{
			name: "sticky",
			type: '"partial" | "always"',
			typeSimple: "enum",
			default: '"partial"',
			description: (
				<span>
					反向轴上的粘性行为。<Code>"partial"</Code> 将在触发器部分位于边界内时保持内容在边界内，而 <Code>"always"</Code> 将使内容无论如何都保持在边界内。
				</span>
			),
		},
		{
			name: "hideWhenDetached",
			type: "boolean",
			default: "false",
			description: (
				<span>
					当触发器完全被遮挡时，是否隐藏内容。
				</span>
			),
		},
	]}
/>

<DataAttributesTable
	data={[
		{
			attribute: "[data-state]",
			values: ["open", "closed"],
		},
		{
			attribute: "[data-side]",
			values: ["left", "right", "bottom", "top"],
		},
		{
			attribute: "[data-align]",
			values: ["start", "end", "center"],
		},
	]}
/>

<CssVariablesTable
	data={[
		{
			cssVariable: "--radix-popover-content-transform-origin",
			description: (
				<>
					从内容和箭头位置/偏移量计算的 <Code>transform-origin</Code>
				</>
			),
		},
		{
			cssVariable: "--radix-popover-content-available-width",
			description: (
				<>触发器和边界边缘之间的剩余宽度</>
			),
		},
		{
			cssVariable: "--radix-popover-content-available-height",
			description: (
				<>触发器和边界边缘之间的剩余高度</>
			),
		},
		{
			cssVariable: "--radix-popover-trigger-width",
			description: <>触发器的宽度</>,
		},
		{
			cssVariable: "--radix-popover-trigger-height",
			description: <>触发器的高度</>,
		},
	]}
/>

### 箭头

可选的箭头元素，与弹出框一起渲染。这可以用来帮助视觉上将锚与 `Popover.Content` 进行连接。必须在 `Popover.Content` 内部渲染。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					将默认渲染的元素更改为作为子元素传递的元素，合并它们的属性和行为。
					<br />
					<br />
					查阅我们的 <a href="../guides/composition">组合</a> 指南以获取更多细节。
				</>
			),
		},
		{
			name: "width",
			type: "number",
			default: 10,
			description: <span>箭头的宽度（以像素为单位）。</span>,
		},
		{
			name: "height",
			type: "number",
			default: 5,
			description: <span>箭头的高度（以像素为单位）。</span>,
		},
	]}
/>

### 关闭

关闭打开的弹出框的按钮。

<PropsTable
	data={[
		{
			name: "asChild",
			required: false,
			type: "boolean",
			default: "false",
			description: (
				<>
					将默认渲染的元素更改为作为子元素传递的元素，合并它们的属性和行为。
					<br />
					<br />
					查阅我们的 <a href="../guides/composition">组合</a> 指南以获取更多细节。
				</>
			),
		},
	]}
/>

## 示例

### 限制内容大小

您可能想要限制内容的宽度以匹配触发器的宽度。您还可能想要限制其高度以不超过视口。

我们提供了多个 CSS 自定义属性，如 `--radix-popover-trigger-width` 和 `--radix-popover-content-available-height` 来支持此功能。使用它们来限制内容的尺寸。

```jsx line=9
// index.jsx
import { Popover } from "radix-ui";
import "./styles.css";

export default () => (
	<Popover.Root>
		<Popover.Trigger>…</Popover.Trigger>
		<Popover.Portal>
			<Popover.Content __className__="PopoverContent" sideOffset={5}>
				…
			</Popover.Content>
		</Popover.Portal>
	</Popover.Root>
);
```

```css
/* styles.css */
.PopoverContent {
	width: var(__--radix-popover-trigger-width__);
	max-height: var(__--radix-popover-content-available-height__);
}
```

### 基于原点的动画

我们提供了一个 CSS 自定义属性 `--radix-popover-content-transform-origin`。使用它可以根据 `side`、`sideOffset`、`align`、`alignOffset` 以及任何碰撞动画内容。

```jsx line=9
// index.jsx
import { Popover } from "radix-ui";
import "./styles.css";

export default () => (
	<Popover.Root>
		<Popover.Trigger>…</Popover.Trigger>
		<Popover.Portal>
			<Popover.Content __className__="PopoverContent">…</Popover.Content>
		</Popover.Portal>
	</Popover.Root>
);
```

```css line=3
/* styles.css */
.PopoverContent {
	transform-origin: var(__--radix-popover-content-transform-origin__);
	animation: scaleIn 0.5s ease-out;
}

@keyframes scaleIn {
	from {
		opacity: 0;
		transform: scale(0);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}
```

### 基于碰撞的动画

我们提供了 `data-side` 和 `data-align` 属性。它们的值会在运行时更改以反映碰撞。使用它们可以创建与碰撞和方向相关的动画。

```jsx line=9
// index.jsx
import { Popover } from "radix-ui";
import "./styles.css";

export default () => (
	<Popover.Root>
		<Popover.Trigger>…</Popover.Trigger>
		<Popover.Portal>
			<Popover.Content __className__="PopoverContent">…</Popover.Content>
		</Popover.Portal>
	</Popover.Root>
);
```

```css line=6-11
/* styles.css */
.PopoverContent {
	animation-duration: 0.6s;
	animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
}
.PopoverContent[__data-side__="top"] {
	animation-name: slideUp;
}
.PopoverContent[__data-side__="bottom"] {
	animation-name: slideDown;
}

@keyframes slideDown {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideUp {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}
```

### 使用自定义锚

如果您不想使用触发器作为锚，可以将内容锚定到另一个元素。

```jsx line=7-11
// index.jsx
import { Popover } from "radix-ui";
import "./styles.css";

export default () => (
	<Popover.Root>
		<Popover.Anchor __asChild__>
			<div className="Row">
				行作为锚 <Popover.Trigger>触发器</Popover.Trigger>
			</div>
		</Popover.Anchor>

		<Popover.Portal>
			<Popover.Content>…</Popover.Content>
		</Popover.Portal>
	</Popover.Root>
);
```

```css
/* styles.css */
.Row {
	background-color: gainsboro;
	padding: 20px;
}
```

## 可访问性

遵循 [对话框 WAI-ARIA 设计模式](https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal)。

### 键盘交互

<KeyboardTable
	data={[
		{
			keys: ["Space"],
			description: "打开/关闭弹出框。",
		},
		{
			keys: ["Enter"],
			description: "打开/关闭弹出框。",
		},
		{
			keys: ["Tab"],
			description: "将焦点移动到下一个可聚焦元素",
		},
		{
			keys: ["Shift + Tab"],
			description: "将焦点移动到上一个可聚焦元素",
		},
		{
			keys: ["Esc"],
			description: (
				<span>
					关闭弹出框并将焦点移到 <Code>Popover.Trigger</Code>。
				</span>
			),
		},
	]}
/>

## 自定义 API

通过将原始部分抽象为您自己的组件来创建自己的 API。

#### 抽象箭头并设置默认配置

此示例将 `Popover.Arrow` 部分抽象出来，并设置默认的 `sideOffset` 配置。

#### 使用

```jsx
import { Popover, PopoverTrigger, PopoverContent } from "./your-popover";

export default () => (
	<Popover>
		<PopoverTrigger>弹出框触发器</PopoverTrigger>
		<PopoverContent>弹出框内容</PopoverContent>
	</Popover>
);
```

#### 实现

```jsx
// your-popover.jsx
import * as React from "react";
import { Popover as PopoverPrimitive } from "radix-ui";

export const Popover = PopoverPrimitive.Root;
export const PopoverTrigger = PopoverPrimitive.Trigger;

export const PopoverContent = React.forwardRef(
	({ children, ...props }, forwardedRef) => (
		<PopoverPrimitive.Portal>
			<PopoverPrimitive.Content sideOffset={5} {...props} ref={forwardedRef}>
				{children}
				<PopoverPrimitive.Arrow />
			</PopoverPrimitive.Content>
		</PopoverPrimitive.Portal>
	),
);
```